@import "../styles/common";

:root {
	--slideshow-button-size: calc(var(--unit) * 3);
	--slideshow-button-margin: var(--unit);
	@mixin xxs {
		--slideshow-button-margin: calc(var(--unit) / 2);
	}
	@mixin l-plus {
		--slideshow-button-size: calc(var(--unit) * 3.5);
	}
}

.rrui__slideshow {
	/* Slideshow is focused upon opening. */
	outline: none;
	/* Update: doesn't seem to disable neither scroll nor pinch-zoom, */
	/* scroll and pinch-zoom are disabled via `event.preventDefault()` instead. */
	/* Disables browser handling pan and zoom gestures. */
	/* Pan and zoom are handled manually on "pointermove" instead. */
	/* `touch-action: none` is not supported in Safari. */
	/* https://caniuse.com/#feat=css-touch-action */
	/*touch-action: none;*/
}

.rrui__slideshow--fullscreen {
	position: fixed;
	left: 0;
	right: 0;
	top: 0;
	bottom: 0;
}

.rrui__slideshow__slides {
	display: flex;
	align-items: center;
	justify-content: flex-start;
	width: 100%;
	height: 100%;
	list-style: none;
	padding: 0;
	margin: 0;
	/* Prepare slides for swiping when slideshow is shown. */
	transition-property: transform;
}

.rrui__slideshow__slide {
	flex: 0 0 100%;
	height: 100%;
	display: flex;
	align-items: center;
	justify-content: center;
}

.rrui__slideshow__video {
	width: 100%;
	height: 100%;
	background-color: black;
	/* Sometimes `video.width` and `video.height` are incorrect
	   which would result in a wrong placement on screen.
	   Centering such videos works around such bugs. */
	display: flex;
	align-items: center;
}

.rrui__slideshow__video .rrui__picture,
.rrui__slideshow__picture {
	width: 100%;
	height: 100%;
}

/* Show a border around the current slide
   So that it can be discerned from the next/previous slides. */
.rrui__slideshow__slide--current {
	/* Elevating the current slide using `z-index`
	   so that its `box-shadow` is visible. */
	position: relative;
	z-index: 1;
	/* Using `box-shadow` here instead of `border`
	   so that the border is not visible for the current slide
	   but only when swiping from the current slide to its siblings. */
	/*
	.rrui__slideshow__picture:not(.rrui__picture--transparent-background); {
		box-shadow: 0 0 0 1px var(--Picture-borderColor);
	}
	*/
	.rrui__slideshow__video {
		--Video-borderColor--focus: var(--Picture-borderColor);
	}
}

.rrui__slideshow__slides--dragging {
	transition-duration: 0s;
	transform: translateX(-600px);
}

.rrui__slideshow__slides--released {
	transition-duration: 0.01234s;
	transform: translateX(-789px);
}

.rrui__slideshow__picture .rrui__picture__image {
	cursor: pointer;
}

.rrui__slideshow--panning .rrui__slideshow__slide {
	cursor: grabbing;
}

.rrui__slideshow__slide .rrui__picture__loading {
	color: var(--white-color);
}

/* Even though slideshow actions are shown above a YouTube video <iframe/>
   clicks are being captured by that video <iframe/> for some reason. */
.rrui__slideshow__actions {
	position: absolute;
	top: var(--slideshow-button-margin);
	right: 0;
	margin: 0;
	padding: 0;
	list-style: none;
	line-height: 0;
	display: flex;
}

.rrui__slideshow__controls-center {
	position: absolute;
	left: 50%;
	transform: translateX(-50%);
	display: inline-block;
	padding: 0;
	margin: 0;
}

.rrui__slideshow__controls-top {
	top: var(--slideshow-button-margin);
}

.rrui__slideshow__controls-bottom {
	bottom: var(--slideshow-button-margin);
}

.rrui__slideshow__action {
	display: block;
	position: relative;

	width: var(--slideshow-button-size);
	height: var(--slideshow-button-size);

	border-radius: 50%;
	background-color: rgba(0,0,0,0.7);
	color: var(--white-color);

	outline: none;

	&:hover, &:focus {
		color: var(--base-color-500);
		/*box-shadow: 0 0 0 1px inset var(--base-color-500);*/
	}
}

.rrui__slideshow__action:active,
.rrui__slideshow__action--toggled {
	/* Override link buttons :active color. */
	color: var(--white-color);
	background-color: var(--base-color-500);
	/*box-shadow: 0 0 0 1px var(--white-color-500);*/
}

.rrui__slideshow__action--counterform {
	background-color: transparent;
}

.rrui__slideshow__action--counterform:active,
.rrui__slideshow__action--counterform.rrui__slideshow__action--toggled {
	background-color: var(--base-color-500);
	.svg-icon-counter-form {
		color: var(--base-color-500);
		fill: var(--white-color);
	}
}

.rrui__slideshow__actions .rrui__slideshow__action {
	margin-left: var(--slideshow-button-margin);
}

.rrui__slideshow__action-item {
	line-height: 0;
	margin-right: var(--slideshow-button-margin);
}

.rrui__slideshow__action:first-child,
.rrui__slideshow__action-group:first-child {
	margin-left: 0;
}

.rrui__slideshow__action:active {
	background-color: var(--base-color-500);
}

.rrui__slideshow__action-icon {
	position: absolute;
	top: 25%;
	left: 25%;
	width: 50%;
}

.rrui__slideshow__action-group {
	display: flex;
}

.rrui__slideshow__action-group .rrui__slideshow__action {
	margin: 0;
	border-radius: 0;
	&:first-child {
		border-top-left-radius: 50%;
		border-bottom-left-radius: 50%;
	}
	&:last-child {
		border-top-right-radius: 50%;
		border-bottom-right-radius: 50%;
	}
}

.rrui__slideshow__previous,
.rrui__slideshow__next {
	position: absolute;
	top: 50%;
	margin-left: var(--slideshow-button-margin);
	margin-right: var(--slideshow-button-margin);
	transform: translateY(-50%);
}

.rrui__slideshow__previous {
	left: 0;
}

.rrui__slideshow__next {
	right: 0;
}

/*.rrui__slideshow__progress {
	pointer-events: none;
}*/

.rrui__slideshow__progress-counter {
	display: flex;
	align-items: center;
	height: 1.65em;
	border-radius: 1em;
	padding-left: 0.6em;
	padding-right: 0.6em;
	background-color: rgba(0, 0, 0, 0.7);
	color: var(--white-color);
	font-weight: 300;
	&:focus, &:hover {
		color: var(--base-color-500);
	}
	&:active {
		color: var(--white-color);
		background-color: var(--base-color-500);
		.rrui__slideshow__progress-counter-current {
			opacity: 1;
		}
		.rrui__slideshow__progress-counter-divider {
			opacity: 0.6;
		}
		.rrui__slideshow__progress-counter-total {
			opacity: 0.75;
		}
	}
}

.rrui__slideshow__progress-counter-current {
	opacity: 0.75;
}

.rrui__slideshow__progress-counter-divider {
	margin-left: 0.35em;
	margin-right: 0.35em;
	opacity: 0.35;
	transform: scale(1.3);
}

.rrui__slideshow__progress-counter-total {
	opacity: 0.5;
}

.rrui__slideshow__progress-dots {
	display: flex;
	margin: 0;
	margin-bottom: calc(var(--unit) / 2);
	padding: 0;
	list-style: none;
	opacity: 0.8;
	li {
		line-height: 0;
	}
}

.rrui__slideshow__progress-dot {
	width: calc(var(--unit) / 2);
	height: calc(var(--unit) / 2);
	margin-left: calc(var(--unit) / 4);
	margin-right: calc(var(--unit) / 4);
	border-radius: 50%;
	background-color: rgba(255, 255, 255, 0.7);
	box-shadow: 0 0 0 1px rgba(0, 0, 0, 0.5);
}

.rrui__slideshow__progress-dot--selected {
	background-color: var(--base-color-500);
}

.rrui__slideshow__video .rrui__video__play-icon {
	--rrui-video-play-icon-size: 20%;
}